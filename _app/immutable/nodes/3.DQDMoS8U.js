import{s as te,a as p,f as u,g,d,k as o,i as Y,c as fe,o as re,b as y,h as x,j as O,m as a,K as E,C as A,n as Z,D as ge}from"../chunks/scheduler.BMT8A4Tp.js";import{S as ne,i as se,b as ie,d as pe,m as ue,t as ce,a as de,e as me}from"../chunks/index.B7RLeFoU.js";import{F as he,T as _e,I as ve}from"../chunks/TextBox.BbJxXiyN.js";import{w as be}from"../chunks/index.COkpg3mn.js";import{c as ye}from"../chunks/common.r10oHhHd.js";const ee=be();function xe(l){let e,n,r;return n=new he({props:{layoutConfig:l[1]??l[0],components:ye}}),{c(){e=p("div"),ie(n.$$.fragment),this.h()},l(t){e=u(t,"DIV",{class:!0});var s=g(e);pe(n.$$.fragment,s),s.forEach(d),this.h()},h(){o(e,"class","px-4 container mx-auto h-[30rem] w-full")},m(t,s){Y(t,e,s),ue(n,e,null),r=!0},p(t,[s]){const C={};s&3&&(C.layoutConfig=t[1]??t[0]),n.$set(C)},i(t){r||(ce(n.$$.fragment,t),r=!0)},o(t){de(n.$$.fragment,t),r=!1},d(t){t&&d(e),me(n)}}}function Ce(l,e,n){let r;fe(l,ee,s=>n(1,r=s));let t={rows:[{cols:[{component:"TextBox",props:{text:"Waiting for input"},posX:"middle",posY:"middle",nodeClass:"h-96"}]}]};return re(()=>{const s=sessionStorage.getItem("aiStore");s&&n(0,t=JSON.parse(s))}),[t,r]}class Se extends ne{constructor(e){super(),se(this,e,Ce,xe,te,{})}}function Ie(l){let e,n,r,t,s,C="Endpoint",X,m,B,S,w,D="Model",V,f,j,T,_,W="API key (stored in browser)",J,h,z,$,N,oe="prompt",F,I,R,v,L,G,b,H,k,ae="Send",Q,le;return{c(){e=p("div"),n=p("div"),r=y(),t=p("label"),s=p("span"),s.textContent=C,X=y(),m=p("input"),B=y(),S=p("label"),w=p("span"),w.textContent=D,V=y(),f=p("input"),j=y(),T=p("label"),_=p("span"),_.textContent=W,J=y(),h=p("input"),z=y(),$=p("label"),N=p("span"),N.textContent=oe,F=y(),I=p("textarea"),R=y(),v=p("div"),L=p("button"),G=y(),b=p("textarea"),H=y(),k=p("button"),k.textContent=ae,this.h()},l(c){e=u(c,"DIV",{class:!0});var i=g(e);n=u(i,"DIV",{class:!0}),g(n).forEach(d),r=x(i),t=u(i,"LABEL",{class:!0});var U=g(t);s=u(U,"SPAN",{"data-svelte-h":!0}),O(s)!=="svelte-5ayklz"&&(s.textContent=C),X=x(U),m=u(U,"INPUT",{class:!0,type:!0,placeholder:!0}),U.forEach(d),B=x(i),S=u(i,"LABEL",{class:!0});var M=g(S);w=u(M,"SPAN",{"data-svelte-h":!0}),O(w)!=="svelte-1m5u4hd"&&(w.textContent=D),V=x(M),f=u(M,"INPUT",{class:!0,type:!0,placeholder:!0}),M.forEach(d),j=x(i),T=u(i,"LABEL",{class:!0});var q=g(T);_=u(q,"SPAN",{"data-svelte-h":!0}),O(_)!=="svelte-1rirsag"&&(_.textContent=W),J=x(q),h=u(q,"INPUT",{class:!0,type:!0,placeholder:!0}),q.forEach(d),z=x(i),$=u(i,"LABEL",{class:!0});var K=g($);N=u(K,"SPAN",{"data-svelte-h":!0}),O(N)!=="svelte-1uehnj0"&&(N.textContent=oe),F=x(K),I=u(K,"TEXTAREA",{class:!0,rows:!0,placeholder:!0}),g(I).forEach(d),K.forEach(d),i.forEach(d),R=x(c),v=u(c,"DIV",{class:!0});var P=g(v);L=u(P,"BUTTON",{class:!0}),g(L).forEach(d),G=x(P),b=u(P,"TEXTAREA",{class:!0,name:!0,id:!0,placeholder:!0}),g(b).forEach(d),H=x(P),k=u(P,"BUTTON",{class:!0,"data-svelte-h":!0}),O(k)!=="svelte-1i8gbo3"&&(k.textContent=ae),P.forEach(d),this.h()},h(){o(n,"class","m-4"),o(m,"class","input rounded-container-token"),o(m,"type","text"),o(m,"placeholder","https://api.openai.com/v1/chat/completions"),o(t,"class","label"),o(f,"class","input rounded-container-token"),o(f,"type","text"),o(f,"placeholder","gpt-4o"),o(S,"class","label"),o(h,"class","input rounded-container-token"),o(h,"type","password"),o(h,"placeholder","sk-"),o(T,"class","label"),o(I,"class","textarea"),o(I,"rows","4"),o(I,"placeholder","You are an AI assistant."),o($,"class","label"),o(e,"class","input-group-divider rounded-container-token"),o(L,"class","input-group-shim"),o(b,"class","bg-transparent border-0 ring-0"),o(b,"name","prompt"),o(b,"id","prompt"),o(b,"placeholder","Write a message..."),o(k,"class","variant-filled-primary"),o(v,"class","input-group input-group-divider grid-cols-[auto_1fr_auto] rounded-container-token my-6")},m(c,i){Y(c,e,i),a(e,n),a(e,r),a(e,t),a(t,s),a(t,X),a(t,m),E(m,l[3]),a(e,B),a(e,S),a(S,w),a(S,V),a(S,f),E(f,l[1]),a(e,j),a(e,T),a(T,_),a(T,J),a(T,h),E(h,l[2]),a(e,z),a(e,$),a($,N),a($,F),a($,I),E(I,l[4]),Y(c,R,i),Y(c,v,i),a(v,L),a(v,G),a(v,b),E(b,l[0]),a(v,H),a(v,k),Q||(le=[A(m,"input",l[7]),A(f,"input",l[8]),A(h,"input",l[9]),A(h,"change",l[6]),A(I,"input",l[10]),A(b,"input",l[11]),A(k,"click",l[12])],Q=!0)},p(c,[i]){i&8&&m.value!==c[3]&&E(m,c[3]),i&2&&f.value!==c[1]&&E(f,c[1]),i&4&&h.value!==c[2]&&E(h,c[2]),i&16&&E(I,c[4]),i&1&&E(b,c[0])},i:Z,o:Z,d(c){c&&(d(e),d(R),d(v)),Q=!1,ge(le)}}}function Ee(l,e,n){let r="Please generate me a personal website",t="gpt-4o",s="",C="https://api.openai.com/v1/chat/completions",m='You are a AI chatbot that only response JSON object, not markdown. You are required to generate a json based on this example:`{"rows":[{"component":"TextBox","props":{"text":"My Website!","type":"h1"},"posX":"middle"},{"layoutClass":"md:my-12","cols":[{"component":"TextBox","props":{"text":"Hi! This is AI generated!","type":"h1"},"posX":"middle","posY":"middle"},{"component":"CodeBlock","props":{"language":"ts","code":"console.log(123)"},"posX":"middle","posY":"middle"},{"component":"ImageBox","props":{"url":"https://placedog.net/200/200"},"posX":"middle","posY":"middle"}]}]}` You have 3 components you can use: TextBox,CodeBlock,ImageBox.';async function B(){const _={messages:[{role:"system",content:m},{role:"user",content:r}],model:"gpt-3.5-turbo",temperature:1,presence_penalty:0,top_p:1,frequency_penalty:0},h=(await(await fetch(C,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(_)})).json()).choices[0].message.content;ee.set(JSON.parse(h))}ee.subscribe(_=>{_&&sessionStorage.setItem("aiStore",JSON.stringify(_))});const S=()=>{sessionStorage.setItem("keyStore",s)};re(()=>{n(2,s=sessionStorage.getItem("keyStore")??"")});function w(){C=this.value,n(3,C)}function D(){t=this.value,n(1,t)}function V(){s=this.value,n(2,s)}function f(){m=this.value,n(4,m)}function j(){r=this.value,n(0,r)}return[r,t,s,C,m,B,S,w,D,V,f,j,()=>B()]}class Te extends ne{constructor(e){super(),se(this,e,Ee,Ie,te,{})}}function we(l){let e,n,r;return n=new he({props:{layoutConfig:l[1],components:l[0]}}),{c(){e=p("div"),ie(n.$$.fragment),this.h()},l(t){e=u(t,"DIV",{class:!0});var s=g(e);pe(n.$$.fragment,s),s.forEach(d),this.h()},h(){o(e,"class","px-4 container mx-auto")},m(t,s){Y(t,e,s),ue(n,e,null),r=!0},p:Z,i(t){r||(ce(n.$$.fragment,t),r=!0)},o(t){de(n.$$.fragment,t),r=!1},d(t){t&&d(e),me(n)}}}function $e(l){return[{TextBox:_e,ImageBox:ve,ChatView:Se,InputView:Te},{rows:[{component:"ChatView"},{component:"InputView"}]}]}class Ve extends ne{constructor(e){super(),se(this,e,$e,we,te,{})}}export{Ve as component};
